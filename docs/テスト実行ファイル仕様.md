# テスト実行ファイル仕様

## 目的
Windows EXEファイルをAWS Batch -> ECSで多重起動した場合の動作検証を目的とする。

## ファイル概要
- **ファイル形式**: Windows実行可能ファイル (.exe)
- **ソースコード言語**: C++
- **対象プラットフォーム**: Windows (ローカル実行、Docker実行)、macOS等他環境（Docker実行）

## ビルド要件
- Windows環境：ローカルビルドおよびDockerビルドの両方に対応
- macOS等他環境：Dockerビルドのみ対応

## 機能仕様

### 基本動作
実行ファイルは引数として秒数を受け取り、カウントダウンを標準出力して終了する。

### 入力
- **引数**: 秒数（整数）
- **形式**: `countdown.exe [秒数]`

### 出力動作
#### 1〜99秒の場合
- 1秒間隔でカウントダウンを標準出力
- 例：30秒指定の場合
  ```
  30
  29
  28
  ...
  2
  1
  0
  ```

#### 100秒以上の場合
- 指定秒数の1/10間隔で標準出力
- 例：200秒指定の場合（20秒間隔で出力）
  ```
  200
  180
  160
  ...
  40
  20
  0
  ```

### エラーハンドリング
- 引数が未指定の場合：使用方法を英語で表示して終了
- 引数が数値以外の場合：エラーメッセージを英語で表示して終了
- 負の数が指定された場合：エラーメッセージを英語で表示して終了

## 技術仕様
- **言語**: C++
- **標準ライブラリ**: 標準的なC++ライブラリのみ使用
- **依存関係**: 外部ライブラリへの依存を最小限に抑制
- **クロスプラットフォーム対応**: Dockerを使用してWindows EXEを他環境でもビルド可能
- **出力言語**: 英語

## ビルド環境セットアップ

### Windows環境での推奨セットアップ

#### 推奨オプション：w64devkit（ポータブル、簡単設定）
1. **ダウンロード**: [w64devkit Releases](https://github.com/skeeto/w64devkit/releases) から最新版をダウンロード
2. **解凍**: 任意のフォルダに解凍（例：`C:\w64devkit`）
3. **起動**: `w64devkit.exe` を実行してターミナルを開く
4. **ビルド**: プロジェクトフォルダに移動して `build.bat` を実行

**特徴**:
- インストール不要のポータブル版
- MinGW-w64 GCC コンパイラ一式を含む
- GDB デバッガ、GNU Make、Vim エディタ等の開発ツールも同梱
- 複数バージョンの並存が可能

#### 代替オプション：MSYS2（包括的な開発環境）
1. **ダウンロード**: [MSYS2公式サイト](https://www.msys2.org/) からインストーラーをダウンロード
2. **インストール**: インストーラーを実行してセットアップ
3. **パッケージインストール**: MSYS2ターミナルで以下を実行
   ```bash
   pacman -S mingw-w64-ucrt-x86_64-gcc
   ```
4. **PATH設定**: システムPATHに `C:\msys64\ucrt64\bin` を追加
5. **ビルド**: コマンドプロンプトまたはPowerShellで `build.bat` を実行

### Docker環境での設定
Docker Desktopがインストールされていれば、どの環境でもWindows EXEをビルド可能：
- **Windows**: `docker-build.bat` を実行
- **macOS/Linux**: `build.sh` を実行

## 使用例
```bash
# 10秒カウントダウン（1秒間隔）
countdown.exe 10

# 300秒カウントダウン（30秒間隔）
countdown.exe 300
```

## AWS Batch/ECS検証用途
このテスト実行ファイルは以下の検証に使用される：
- 複数インスタンスでの同時実行時の動作確認
- リソース競合の有無の確認
- 長時間実行時の安定性確認
- ログ出力の整合性確認